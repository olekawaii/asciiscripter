#!/bin/sh

if [ $(tput cols) -lt 39 -o $(tput lines) -lt 17 ]; then
    printf "\33[31mterminal is too small\nmust be at least 39 by 17 cells\33[0m\n" >&2
    exit 1
fi

stty -echo
printf '\33[?25l'

move_up="\33[16F"

cleanup() {
    printf "$move_up\33[0J\33[0m\33[?25h"
    stty echo
    exit 0
}

trap cleanup INT

draw() {
    printf "$move_up$1"
    sleep 0.2
}

yes '' | head -n 16

while true; do
    draw '                 \33[34m_       \33[37m.-----.       \n  .\33[31m\134\33[37m\134\33[31m\134         \33[34m>(_)<    \33[37m/       \134      \n \134\33[31m\134\33[37m` \134\33[31m\134                \33[37m|\33[31m.\33[35mo\33[32mO\33[34mo\33[33mO\33[36mo\33[31mO\33[34mo\33[31m.\33[37m|     \n \33[31m\134\33[37m\134  \33[31m\134\33[37m` \33[32m/\134\134|//\134        \33[37m|\33[36m.\33[31mO\33[34mo\33[36mO\33[32mo\33[35mO\33[33mo\33[36mO\33[32m.\33[37m|     \n \134\33[31m\134    \33[32m/\33[37m| - - .\33[32m\134        \33[37m\134 \33[35mO\33[32mo\33[34mO\33[33mo\33[36mO \33[37m/      \n \33[31m\134\33[37m\134     _ v-v |     \33[32m7    \33[37m\47-----\47       \n \134\33[31m\134    \33[37m/ ) --\47    \33[33m((_))   \33[31m/   \134        \n      \33[37m/ /  __ \134          \33[31m/ \33[37m[_] \33[31m\134       \n \33[36m___ \33[37m(_/  (____) \33[36m________\33[31m|_____|\33[36m______ \n(_____________________________________)\n \33[37m| |               | |\33[33m]]]]]] \33[37m|    .  | \n | |   .\47    \47.    | |\33[33m]]]]]] \33[37m| ___|  | \n | |  |  .--.  |   | |\33[33m]]]]]] \33[37m|     \134 | \n | |  | |    | |   | |______\134|______\134| \n | |  | |    | |   | |\33[32m)))))) \33[37m|\33[35m]]]]]] \33[37m| \n | |  | |    | |   \134 |\33[32m)))))) \33[37m|\33[35m]]]]]] \33[37m| \n \47-\47 (_/      \134_)   \134|______\134|______\134| '
    draw '\33[4E\33[10C\33[37mo o\n\n\33[34C\33[35mO\33[10E'
    draw '\n  \33[31m.\33[37m\134\33[31m\134\33[37m\134\n \33[31m\134\33[37m\134\33[31m` \134\33[37m\134\n \134\33[31m\134  \33[37m\134\33[31m`\n \134\33[37m\134\n \134\33[31m\134\n \134\33[37m\134\33[31C \33[35mP\33[10E'
    draw '\33[6E\33[35C \33[35mE\33[10E'
    draw '\n  \33[37m.\33[31m\134\33[37m\134\33[31m\134\n \33[37m\134\33[31m\134\33[37m` \134\33[31m\134\n \134\33[37m\134  \33[31m\134\33[37m`\n \134\33[31m\134\n \134\33[37m\134\n \134\33[31m\134\33[33C \33[35mN\33[10E'
    draw '\33[6E\33[34C\33[35mOPE\33[8E\33[6C\33[37m_\n | | (__\n\33[5C   '
    draw '\n  \33[31m.\33[37m\134\33[31m\134\33[37m\134\n \33[31m\134\33[37m\134\33[31m` \134\33[37m\134\n \134\33[31m\134  \33[37m\134\33[31m`\n \134\33[37m\134\33[7C- -\n \134\33[31m\134\n \134\33[37m\134\33[31C    \33[8E\33[6C|\33[8C_\n | |  | \33[6C__)\n\33[5C(_/\33[6C   '
    draw '\33[4E\33[10C\33[37mo o\n\n\33[34C\33[35mOPEN\33[8E\33[15C\33[37m|\n\33[14C | \n\33[14C\134_)'
    draw '\n  \33[37m.\33[31m\134\33[37m\134\33[31m\134\n \33[37m\134\33[31m\134\33[37m` \134\33[31m\134\n \134\33[37m\134  \33[31m\134\33[37m`\n \134\33[31m\134\n \134\33[37m\134\n \134\33[31m\134\33[31C    \33[10E'
    draw '\33[6E\33[34C\33[35mO\33[10E'
    draw '\n  \33[31m.\33[37m\134\33[31m\134\33[37m\134\n \33[31m\134\33[37m\134\33[31m` \134\33[37m\134\n \134\33[31m\134  \33[37m\134\33[31m`\n \134\33[37m\134\n \134\33[31m\134\n \134\33[37m\134\33[31C \33[35mP\33[10E'
    draw '\33[6E\33[35C \33[35mE\33[10E'
    draw '\n  \33[37m.\33[31m\134\33[37m\134\33[31m\134\n \33[37m\134\33[31m\134\33[37m` \134\33[31m\134\n \134\33[37m\134  \33[31m\134\33[37m`\n \134\33[31m\134\33[7C\33[37m- -\n \33[31m\134\33[37m\134\n \134\33[31m\134\33[33C \33[35mN\33[10E'
    draw '\33[4E\33[10C\33[37mo o\n\n\33[34C\33[35mOPE\33[8E\33[6C\33[37m_\n | | (__\n\33[5C   '
    draw '\n  \33[31m.\33[37m\134\33[31m\134\33[37m\134\n \33[31m\134\33[37m\134\33[31m` \134\33[37m\134\n \134\33[31m\134  \33[37m\134\33[31m`\n \134\33[37m\134\n \134\33[31m\134\n \134\33[37m\134\33[31C    \33[8E\33[6C|\33[8C_\n | |  | \33[6C__)\n\33[5C(_/\33[6C   '
    draw '\33[6E\33[34C\33[35mOPEN\33[8E\33[15C\33[37m|\n\33[14C | \n\33[14C\134_)'
    draw '\n  \33[37m.\33[31m\134\33[37m\134\33[31m\134\n \33[37m\134\33[31m\134\33[37m` \134\33[31m\134\n \134\33[37m\134  \33[31m\134\33[37m`\n \134\33[31m\134\n \134\33[37m\134\n \134\33[31m\134\33[31C    \33[10E'
    draw '\33[6E\33[34C\33[35mO\33[10E'
    draw '\n  \33[31m.\33[37m\134\33[31m\134\33[37m\134\n \33[31m\134\33[37m\134\33[31m` \134\33[37m\134\n \134\33[31m\134  \33[37m\134\33[31m`\n \134\33[37m\134\33[7C- -\n \134\33[31m\134\n \134\33[37m\134\33[31C \33[35mP\33[10E'
    draw '\33[4E\33[10C\33[37mo o\n\n\33[35C \33[35mE\33[10E'
    draw '\n  \33[37m.\33[31m\134\33[37m\134\33[31m\134\n \33[37m\134\33[31m\134\33[37m` \134\33[31m\134\n \134\33[37m\134  \33[31m\134\33[37m`\n \134\33[31m\134\n \134\33[37m\134\n \134\33[31m\134\33[33C \33[35mN\33[10E'
    draw '\33[6E\33[34C\33[35mOPE\33[8E\33[6C\33[37m_\n | | (__\n\33[5C   '
    draw '\n  \33[31m.\33[37m\134\33[31m\134\33[37m\134\n \33[31m\134\33[37m\134\33[31m` \134\33[37m\134\n \134\33[31m\134  \33[37m\134\33[31m`\n \134\33[37m\134\n \134\33[31m\134\n \134\33[37m\134\33[31C    \33[8E\33[6C|\33[8C_\n | |  | \33[6C__)\n\33[5C(_/\33[6C   '
    draw '\33[6E\33[34C\33[35mOPEN\33[8E\33[15C\33[37m|\n\33[14C | \n\33[14C\134_)'
done
